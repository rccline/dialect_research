"0",""
"0","# Get overall stats"
"0","total_refs <- safe_query('SELECT COUNT(*) FROM ""References""')"
"2","Warning: Query error: unused argument (query)"
"0","total_refs <- if(nrow(total_refs) > 0 && ""count"" %in% names(total_refs)) total_refs$count else 0"
"0",""
"0","total_books <- safe_query('SELECT COUNT(*) FROM ""References"" WHERE ""DocumentType"" = \'Book\'')"
"2","Warning: Query error: unused argument (query)"
"0","total_books <- if(nrow(total_books) > 0 && ""count"" %in% names(total_books)) total_books$count else 0"
"0",""
"0","total_journals <- safe_query('SELECT COUNT(*) FROM ""References"" WHERE ""DocumentType"" = \'Journal Article\'')"
"2","Warning: Query error: unused argument (query)"
"0","total_journals <- if(nrow(total_journals) > 0 && ""count"" %in% names(total_journals)) total_journals$count else 0"
"0",""
"0","total_other <- total_refs - total_books - total_journals"
"0",""
"0","# Get publication years"
"0","pub_years <- safe_query('SELECT SUBSTRING(CAST(""PublicationDate"" AS TEXT), 1, 4) AS year, "
"0","                        COUNT(*) AS count "
"0","                        FROM ""References"" "
"0","                        WHERE ""PublicationDate"" IS NOT NULL "
"0","                        GROUP BY year "
"0","                        ORDER BY year')"
"2","Warning: Query error: unused argument (query)"
"0","# Subject stats"
"0","subject_counts <- safe_query('"
"0","  SELECT s.""SubjectName"", COUNT(*) as count "
"0","  FROM ""Subjects"" s"
"0","  JOIN ""ReferenceSubjects"" rs ON s.""SubjectID"" = rs.""SubjectID"""
"0","  GROUP BY s.""SubjectName"""
"0","  ORDER BY count DESC"
"0","  LIMIT 10"
"0","')"
"2","Warning: Query error: unused argument (query)"
